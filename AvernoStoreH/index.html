<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Averno ‚ñ≥ Store</title>
  <link rel="preload" as="image" href="Port.png">
  <link rel="preload" as="image" href="marco.svg">
  <link rel="preload" as="image" href="skull.gif">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">

  <style>
    /* ======= Variables y tipograf√≠a ======= */
    :root{
      --bg:#000;
      --muted:#cccccc;
      --accent:#C10202;
      --card:#0f0f0f;
      --dorado-oscuro: #8B0000;
      --dorado-claro: #8B0000;
    }

    @font-face {
      font-family: 'BurzumGothic';
      src: url('ruta/a/tu/BurzumGothic.woff') format('woff');
    }

    html,body{height:100%;margin:0;font-family:BurzumGothic,serif;background:var(--bg);color:var(--muted);}

    /* ======= Reglas principales (fusionadas desde index.html) ======= */
    /* Top bar (wishlist + cart) */
    #top-bar {
      display: flex;
      justify-content: center;
      gap: 50px;
      padding: 10px 20px;
      background-color: #111;
      border-bottom: 1px solid var(--dorado-claro);
      color: var(--dorado-claro);
      position: sticky;
      top: 0;
      z-index: 9999;
      text-align: center;
    }

    .icono-acceso,
    .icono-acceso * {
      cursor: pointer !important;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.3s ease;
      position: relative;
      text-align: center;
    }

    .icono-acceso span {
      position: absolute;
      top: 0;
      right: -8px;
      background-color: transparent;
      color: #cccccc;
      padding: 2px 6px;
      border-radius: 50%;
      font-size: 18px;
      font-family: 'BurzumGothic', serif;
    }

    .icono-acceso div { font-size: 16px; color: var(--dorado-oscuro); transition: color 0.3s ease; font-family: 'BurzumGothic', serif; }

    .zoom-focus { transform: scale(1.05); transition: transform 0.9s ease; }

    /* GIF, filtros e instrucciones */
    .gif-fuego { width: 100px; height: auto; vertical-align: middle; margin: 0 6px; }
    .instruccion { text-align:center; color:#777; font-size:15px; margin:6px 0 36px; }

    /* Catalogo / grid */
    .products-wrap, .catalogo { max-width:1200px; margin:0 auto; padding:0 16px 80px; box-sizing:border-box }
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
    .product-card, .item { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); padding:12px; border-radius:4px; text-align:center }
    .product-card .thumb{width:100%;height:300px;overflow:hidden;display:block;background:#111}
    .product-card img, .item img { width:100%; height:100%; object-fit:cover; display:block }

    /* Bloque manifiesto / sugerencias */
    .bloque-manifiesto{ background: rgba(20,20,20,0.85); font-size:15px; color:#cccccc; border-left:3px solid var(--dorado-claro); padding:20px; max-width:800px; margin:20px auto; font-family: 'BurzumGothic', serif; text-align: justify; }
    .frase-autor{ background: url('https://www.transparenttextures.com/patterns/dark-mosaic.png'), rgba(0,0,0,0.5); background-blend-mode: overlay; padding:15px 20px; font-style: italic; color:#ccc; font-size:1.2rem; text-align:center; margin:30px auto 0; max-width:800px; }

    .linea-dorada { border:none; height:1px; background-color:var(--dorado-claro); margin:40px auto 20px; width:calc(100% - 40px); max-width:100%; box-sizing:border-box; }

    /* Wishlist / cart blocks */
    #wishlist, #cart { background:#000; padding:20px; border-radius:8px; max-width:800px; margin:40px auto; text-align:center; box-sizing:border-box; }
    #wishlist ul, #cart ul { list-style:none; padding:0; margin:0 0 20px 0; text-align:left }

    .precio { font-family: 'BurzumGothic', serif; color: var(--dorado-claro); font-weight:bold; margin-bottom:-2px; font-size:20px; }
    .heart-icon { font-size:40px; color:white; text-shadow:-0.5px -0.5px 0 black,0.5px -0.5px 0 black,-0.5px 0.5px 0 black,0.5px 0.5px 0 black; position:absolute; top:8px; right:8px; display:inline-block; cursor:pointer; user-select:none; z-index:3; }
    .heart-icon.active { color: var(--dorado-claro); text-shadow:0 0 6px var(--dorado-claro); }

    .cart-button{ margin-top:20px; background-color:#0f0f0f; color:#cccccc; border:1px solid #0f0f0f; padding:8px 12px; cursor:pointer; border-radius:4px; font-family:'BurzumGothic',serif; font-size:14px }
    .cart-button:hover{ background-color:rgba(25,25,25,0.8); color:var(--dorado-claro); }

    .volver-btn{ background-color:#e0e0e0; color:black; border:none; padding:10px 20px; font-size:1em; border-radius:4px; cursor:pointer; transition:background-color 0.3s ease; margin-top:1em }
    .volver-btn:hover{ background-color:#e0e0e0; color:var(--dorado-oscuro) }

    /* Flyer emergente */
    #flyer-overlay{ position:fixed; inset:0; background:#000000; z-index:10000; display:flex; align-items:center; justify-content:center }
    #flyer-overlay img{ width:100vw; height:auto; max-height:100vh; object-fit:contain; animation:parpadeo-led 2.5s infinite }
    #flyer-close{ position:absolute; top:20px; right:30px; font-size:22px; color:white; background:none; border:none; cursor:pointer; z-index:10001 }
    #flyer-close:hover{ color:var(--dorado-oscuro) }
    .flyer-hint{ position:absolute; top:50px; right:30px; font-size:13px; color:#ccc; font-family:'BurzumGothic',serif }

    /* Lightbox */
    #lightbox{ display:none; position:fixed; inset:0; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; z-index:9999 }
    #lightbox img{ max-width:80%; max-height:80%; object-fit:contain; box-shadow:0 0 20px rgba(0,0,0,0.8) }
    #lightbox .close-btn{ position:absolute; top:20px; right:30px; font-size:3rem; color:#cccc; cursor:pointer; font-family:'BurzumGothic',serif }

  /* Bot√≥n flotante WhatsApp - id√©ntico a tu original */
  .nequi-btn{
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 64px;
  height: 64px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--accent); /* usa tu variable --accent definida en :root */
  border-radius: 50%;
  text-decoration:none;
  z-index: 999;
  box-shadow: 0 8px 22px rgba(193,2,2,0.18), 0 2px 6px rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.04);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
  }
  .nequi-btn i{
  font-size:1.6rem;
  color:#ffffff;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  pointer-events: none; /* evita que el icono capture clicks */
  }
  .nequi-btn:hover{
  transform: translateY(-3px);
  box-shadow: 0 12px 30px rgba(193,2,2,0.28), 0 4px 8px rgba(0,0,0,0.5);
  background: #9b0000; /* tono ligeramente m√°s oscuro al hover */
  }

  /* Responsivo: mantiene tama√±o en m√≥viles */
  @media (max-width:420px){
  .nequi-btn{ width:56px; height:56px; bottom:14px; right:14px; }
  .nequi-btn i{ font-size:1.4rem; }
  }


    /* Aplica al footer clonado para que tenga el mismo estilo que #contacto */
  #contacto-mirror {
  background: #111;
  color: #cccccc;
  padding: 2.5rem 1rem;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  gap: 20px;
  text-align: left;
  border-top: 2px solid var(--dorado-claro);
  animation: pulseFooter 10s ease-in-out infinite;
  will-change: box-shadow;
  box-sizing: border-box;
  margin-top: 20px;
  }
  #contacto-mirror div p {
  margin-bottom: 0.75rem;
  font-size: 1rem;
  display: flex;
  align-items: center;
  gap: 6px;
  }
  #contacto-mirror i {
  margin-right: 0.5rem;
  color: var(--dorado-oscuro);
  font-size: 1.5rem;
  vertical-align: middle;
  line-height: 1;
  }

  /* responsivo (igual que tu footer original) */
  @media (max-width: 768px) {
  #contacto-mirror {
    flex-direction: column;
    align-items: flex-start;
    padding: 50px 20px;
    text-align: left;
  }
  #contacto-mirror div { width: 100%; }
  }
    
    /* Responsivo */
    @media (max-width:980px){ .grid{ grid-template-columns:repeat(2,1fr) } }
    @media (max-width:560px){ .grid{ grid-template-columns:1fr } .product-card .thumb{ height:420px } .gif-fuego{ width:130px } }

  </style>
</head>
<body>

  <!-- FLYER (copiado de index.html) -->
  <div id="flyer-overlay">
    <button id="flyer-close" title="Cerrar">íâΩ</button>
    <small class="flyer-hint">Haz clic en ‚úñ para cerrar</small>
    <img src="Port.png" alt="Flyer Averno"/>
  </div>

  <!-- TOP BAR: contador wishlist + carrito (copiado de index.html) -->
  <header id="top-bar">
    <div class="icono-acceso" onclick="irYZoom('wishlist')" data-descripcion="Ver Tus Productos Infernales">ü§òüèª<div>Lista de Deseos</div>
      <span id="contador-wishlist">0</span>
    </div>

    <div class="icono-acceso" onclick="irYZoom('cart')" data-descripcion="Revisa Tus Compras Del Averno">üõí<div>Carrito de Compras</div>
      <span id="contador-cart">0</span>
    </div>
  </header>

  <h2 style="text-align:center">HOODIES<img src="skull.gif" class="gif-fuego" alt="fuego"></h2>

  <p class="instruccion">&gt; HAZ CLICK EN EL PENTAGRAMA <strong style="color:white;"> ‚õß </strong> PARA AGREGAR A TU LISTA &lt;</p>

  <!-- Productos: usar√© el contenedor tipo catalogo como en index.html -->
  <main class="products-wrap">
    <div id="catalogo-ropa" class="catalogo grid"></div>
  </main>

  <!-- Lista de deseos y carrito (copiados) -->
  <div id="wishlist">
    <h3>Lista de deseos</h3>
    <ul id="wishlist-items"></ul>
    <button class="cart-button" onclick="moverWishlistACarrito()">Iniciar compra</button>
    <button class="cart-button" onclick="vaciarWishlist()">Vaciar lista de deseos</button>
  </div>

  <div id="cart">
    <h3>Carrito de compras</h3>
    <ul id="cart-items"></ul>
    <button class="cart-button" onclick="comprarPorWhatsapp()">Comprar</button>
    <button class="cart-button" onclick="vaciarCarrito()">Vaciar carrito</button>
  </div>

  <hr class="linea-dorada">

  <!-- Sugerencias ‚ñ≥ Comentarios (bloque-manifiesto) -->
  <section class="bloque-manifiesto">
    <h2>Sugerencias ‚ñ≥ Comentarios</h2>
    <form action="https://formspree.io/f/xvgqpgpl" method="POST" novalidate>
      <label for="email">Tu correo:</label><br>
      <input type="email" name="email" id="email" required placeholder="tucorreo@ejemplo.com"><br><br>

      <label for="mensaje">Tu mensaje:</label><br>
      <textarea name="message" id="mensaje" rows="6" required placeholder="Escribe tu sugerencia o comentario aqu√≠..."></textarea><br><br>

      <button type="submit">Enviar</button>
    </form>
  </section>

  <div class="volver-container" style="text-align:center;margin:40px 0">
    <button class="volver-btn" onclick="location.href='/'">VOLVER</button>
  </div>
  
<footer id="contacto-mirror" data-aos="fade-up" data-aos-delay="600">
  <div>
    <p><i class="fas fa-envelope"></i><strong> Correo:</strong> averno_store@despertardelaverno.com </p>
    <p><i class="fab fa-facebook"></i> <strong>Facebook:</strong> https://www.facebook.com/AvrnoStore</p>
  </div>
  <div>
    <p><i class="fab fa-instagram"></i><strong> Instagram:</strong> Averno_Store</p>
    <p><i class="fab fa-whatsapp"></i><strong> WhatsApp:</strong> +57 3181541064</p>
  </div>
  <div>
    <p><i class="fas fa-map-marker-alt"></i><strong> Direcci√≥n:</strong> Palmira - Valle del Cauca</p>
    <p><i class="fas fa-copyright"></i> 2025 ‚Ç≥V‚±§‚Ç¶√ò ‚Ç¥‚ÇÆ√ò‚±§…Ü </p>
  </div>
</footer>

<a class="nequi-btn"
   href="https://wa.me/message/7GNMDBFX4L6IJ1"
   target="_blank"
   rel="noopener noreferrer"
   aria-label="Contactar por WhatsApp">
  <i class="fab fa-whatsapp" aria-hidden="true"></i>
</a>
  
  <!-- Lightbox -->
  <div id="lightbox">
    <div class="close-btn" onclick="closeLightbox()">‚úñ</div>
    <img id="lightbox-img" src="" alt="ampliada">
  </div>

<script>
  // ===== Datos =====
  const productosRopa = [
    { nombre: "MASK HANNYA", precio: 174990, imagen: "1.png", exclusivo: false },
    { nombre: "ALIEN SACRIFICE", precio: 174990, imagen: "2.png", exclusivo: false },
    { nombre: "ALIEN PLAGUE", precio: 174990, imagen: "3.png", exclusivo: false },
    { nombre: "SKULL IN ACID", precio: 174990, imagen: "4.png", exclusivo: false }
  ];

  // Estado
  let wishlistData = {};
  let cartData = {};

  // ===== Helper: crear tarjeta =====
  function crearItem(producto, esRopa = true) {
    const item = document.createElement('div');
    item.className = 'item';
    item.setAttribute('data-precio-inicial', producto.precio);

    const id = producto.nombre.replace(/\s+/g,'_');

    let tallaSelect = '';
    if (esRopa) {
      tallaSelect =
        '<label class="cantidad-label">Talla:' +
        '<select class="cantidad-input" id="talla-'+id+'">' +
        '<option value="">Elige talla</option>' +
        '<option value="S">S</option>' +
        '<option value="M">M</option>' +
        '<option value="L">L</option>' +
        '<option value="XL">XL</option>' +
        '</select></label>' +
        '<span id="error-'+id+'" class="error-msg"></span>';
    }

    item.innerHTML =
      '<div class="item-marco" style="position:relative; width:100%; height:280px; overflow:hidden;">' +
        '<img src="'+producto.imagen+'" alt="'+producto.nombre+'" class="producto-imagen" loading="eager" decoding="async" style="width:100%;height:100%;object-fit:cover">' +
        '<span class="heart-icon" onclick="toggleFavorite(this,\''+producto.nombre+'\','+producto.precio+','+esRopa+')">‚õß</span>' +
      '</div>' +
      '<h3>'+producto.nombre+'</h3>' +
      '<div class="precio" data-precio="'+producto.precio+'" data-tipo="Normal">$'+producto.precio.toLocaleString('es-CO')+'</div>' +
      '<div class="talla-switch" style="margin-top:8px;">' +
        '<button class="cart-button boton-talla" onclick="cambiarPrecio(this, '+producto.precio+', \'Normal\')">Normal</button>' +
        '<button class="cart-button boton-talla" onclick="cambiarPrecio(this, '+(producto.precio + 10000)+', \'Oversize\')">Oversize</button>' +
      '</div>' +
      '<div class="cantidad-talla-wrapper" style="display:flex;align-items:center;gap:12px;margin-top:10px;">' +
        '<label class="cantidad-label">Cant:' +
          '<input type="number" class="cantidad-input" id="cantidad-'+id+'" value="1" min="1" style="width:60px;padding:6px;background:#111;color:#ccc;border-radius:4px;border:1px solid transparent">' +
        '</label>' +
        '<div class="separator" style="width:4px;height:1.1em;background-color:var(--dorado-oscuro);opacity:0.6"></div>' +
        tallaSelect +
      '</div>' +
      '<button class="cart-button" onclick="addToCart(\''+producto.nombre+'\','+producto.precio+','+esRopa+')">Agregar al carrito</button>';

    if (esRopa) {
      const select = item.querySelector('#talla-'+id);
      const errorSpan = item.querySelector('#error-'+id);
      if (select) select.addEventListener('change', () => { if (select.value) errorSpan.textContent = ''; });
    }

    return item;
  }

  function renderCatalogo(productos, contenedorId='catalogo-ropa', esRopa=true) {
    const cont = document.getElementById(contenedorId);
    cont.innerHTML = '';
    productos.forEach(p => cont.appendChild(crearItem(p, esRopa)));
  }

  // ===== Wishlist / cart =====
  function toggleFavorite(el, nombre, precio, esRopa) {
    el.classList.toggle('active');

    if (wishlistData[nombre]) delete wishlistData[nombre];
    else {
      const item = el.closest('.item');
      if (!item) return;
      const precioEl = item.querySelector('.precio');
      const precioActual = parseInt((precioEl && precioEl.getAttribute('data-precio')) || precio, 10);
      const tipo = (precioEl && precioEl.getAttribute('data-tipo')) || 'Normal';
      wishlistData[nombre] = { precio: precioActual, esRopa, tipo };
    }
    renderWishlist();
  }

  function renderWishlist() {
    const ul = document.getElementById('wishlist-items'); ul.innerHTML = '';
    for (let nombre in wishlistData) {
      const producto = wishlistData[nombre];
      const id = nombre.replace(/\s+/g,'_');
      const tallaSelect = producto.esRopa
        ? ' <label style="display:inline-flex;align-items:center;gap:8px;margin-left:12px;"><span class="talla-texto">Talla:</span><select id="wishlist-talla-'+id+'" class="cantidad-input"><option value="">Elige talla</option><option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option></select></label><span id="error-wishlist-'+id+'" class="error-msg"></span>'
        : '';
      ul.innerHTML += '<li style="margin-bottom:12px;"><span>'+nombre+' ‚Äî <strong>'+(producto.tipo || 'Normal')+'</strong> ‚Äî $'+producto.precio.toLocaleString('es-CO')+'</span>'+tallaSelect+'<button class="remove-button" onclick="eliminarDeWishlist(\''+nombre+'\')">‚úñ</button></li>';
    }
    actualizarContadores();
  }

  function eliminarDeWishlist(nombre) {
    delete wishlistData[nombre];
    document.querySelectorAll('.heart-icon').forEach(h => {
      if (h.getAttribute('onclick') && h.getAttribute('onclick').includes(nombre)) h.classList.remove('active');
    });
    renderWishlist();
  }

  function addToCart(nombre, precio, esRopa) {
    const id = nombre.replace(/\s+/g,'_');
    const cantidadEl = document.getElementById('cantidad-'+id);
    const cantidad = parseInt((cantidadEl && cantidadEl.value) || '1', 10);
    let talla = '';
    if (esRopa) {
      const tallaEl = document.getElementById('talla-'+id);
      const errorEl = document.getElementById('error-'+id);
      talla = (tallaEl && tallaEl.value) || '';
      if (!talla) { if (errorEl) { errorEl.textContent = 'POR FAVOR SELECCIONA ‚õß UNA TALLA.'; errorEl.style.color = 'var(--dorado-oscuro)'; } return; }
      if (errorEl) errorEl.textContent = '';
    }
    if (!cantidadEl) return;
    const itemEl = cantidadEl.closest('.item'); if (!itemEl) return;
    const precioEl = itemEl.querySelector('.precio');
    const precioActual = parseInt(precioEl.getAttribute('data-precio'), 10);
    const tipoSeleccionado = precioEl.getAttribute('data-tipo') || 'Normal';
    cartData[nombre] = { precio: precioActual, cantidad: cantidad, talla: talla, tipo: tipoSeleccionado };
    renderCarrito(); actualizarContadores();
  }

  function moverWishlistACarrito() {
    for (let nombre in wishlistData) {
      const producto = wishlistData[nombre];
      const id = nombre.replace(/\s+/g,'_');
      let talla = '';
      if (producto.esRopa) {
        const el = document.getElementById('wishlist-talla-'+id);
        const errorEl = document.getElementById('error-wishlist-'+id);
        if (!el || !el.value) { if (errorEl) { errorEl.textContent = 'POR FAVOR SELECCIONA ‚õß UNA TALLA.'; errorEl.style.color = 'var(--dorado-oscuro)'; } return; }
        talla = el.value; if (errorEl) errorEl.textContent = '';
      }
      cartData[nombre] = { precio: producto.precio, cantidad:1, talla: talla, tipo: producto.tipo };
    }
    wishlistData = {}; renderWishlist(); renderCarrito(); document.querySelectorAll('.heart-icon.active').forEach(icon => icon.classList.remove('active'));
  }

  function renderCarrito() {
    const ul = document.getElementById('cart-items'); ul.innerHTML = '';
    for (let nombre in cartData) {
      const it = cartData[nombre];
      ul.innerHTML += '<li style="margin-bottom:8px;"><span>'+nombre+' ‚Äî <strong>'+(it.tipo || 'Normal')+'</strong> x'+it.cantidad+' ' +
        (it.talla ? '(<span class="talla-texto">Talla</span> '+it.talla+')' : '') +
        ' ‚Äî $'+(it.precio * it.cantidad).toLocaleString('es-CO')+
        '</span> <button onclick="eliminarDelCarrito(\''+nombre+'\')">‚úñ</button></li>';
    }
    actualizarContadores();
  }

  function eliminarDelCarrito(nombre) { delete cartData[nombre]; renderCarrito(); }

  function vaciarWishlist() {
    wishlistData = {}; renderWishlist();
    document.querySelectorAll('.item').forEach(item => {
      const precioBase = parseInt(item.getAttribute('data-precio-inicial'),10);
      const precioEl = item.querySelector('.precio');
      if (precioEl) { precioEl.textContent = '$'+precioBase.toLocaleString('es-CO'); precioEl.setAttribute('data-precio', precioBase); precioEl.setAttribute('data-tipo','Normal'); }
      item.querySelectorAll('.boton-talla').forEach(btn => btn.classList.remove('bg-gray-700','text-white'));
    });
    document.querySelectorAll('.cantidad-input').forEach(i => { if (i.type === 'number') i.value = 1; else i.value = ''; });
    document.querySelectorAll('.error-msg').forEach(e => e.textContent = '');
    document.querySelectorAll('.heart-icon.active').forEach(h => h.classList.remove('active'));
  }

  function vaciarCarrito() {
    cartData = {}; renderCarrito();
    document.querySelectorAll('.item').forEach(item => {
      const precioBase = parseInt(item.getAttribute('data-precio-inicial'),10);
      const precioEl = item.querySelector('.precio');
      if (precioEl) { precioEl.textContent = '$'+precioBase.toLocaleString('es-CO'); precioEl.setAttribute('data-precio', precioBase); precioEl.setAttribute('data-tipo','Normal'); }
      item.querySelectorAll('.boton-talla').forEach(btn => btn.classList.remove('bg-gray-700','text-white'));
    });
    document.querySelectorAll('.cantidad-input').forEach(i => { if (i.type === 'number') i.value = 1; else i.value = ''; });
    document.querySelectorAll('.error-msg').forEach(e => e.textContent = '');
  }

  function comprarPorWhatsapp() {
    if (Object.keys(cartData).length === 0) { alert('Carrito vac√≠o'); return; }
    const lineas = Object.entries(cartData).map(([nombre,it]) => {
      const talla = it.talla ? ' (Talla '+it.talla+')' : '';
      const subtotal = (it.precio * it.cantidad).toLocaleString('es-CO');
      return '- '+nombre+' ('+it.tipo+') x'+it.cantidad+ talla +' = $'+subtotal;
    });
    const texto = '¬°Hola!, Quiero Comprar:\n'+lineas.join('\n');
    const encoded = encodeURIComponent(texto);
    const url = 'https://wa.me/573181541064?text='+encoded;
    window.open(url,'_blank');
  }

  function cambiarPrecio(boton, nuevoPrecio, tipo) {
    const tarjeta = boton.closest('.item');
    const precioEl = tarjeta.querySelector('.precio');
    precioEl.textContent = '$'+nuevoPrecio.toLocaleString('es-CO');
    precioEl.setAttribute('data-precio', nuevoPrecio);
    precioEl.setAttribute('data-tipo', tipo);
  }

  function actualizarContadores() {
    const w = document.getElementById('contador-wishlist');
    const c = document.getElementById('contador-cart');
    if (w) w.textContent = Object.keys(wishlistData).length;
    if (c) c.textContent = Object.keys(cartData).length;
  }

  function irYZoom(seccionId) {
    const el = document.getElementById(seccionId); if (!el) return;
    el.scrollIntoView({ behavior:'smooth', block:'center' });
    el.classList.add('zoom-focus');
    setTimeout(()=>el.classList.remove('zoom-focus'),1500);
  }

  function openLightbox(src) {
    const lb = document.getElementById('lightbox');
    const img = document.getElementById('lightbox-img');
    img.src = src; lb.style.display = 'flex';
  }
  function closeLightbox() {
    const lb = document.getElementById('lightbox');
    if (lb) lb.style.display = 'none';
  }

  // --- Cerrar flyer: bot√≥n, click fuera y ESC ---
  function cerrarFlyer() {
    const ov = document.getElementById('flyer-overlay');
    if (ov) ov.style.display = 'none';
  }

  document.addEventListener('keydown', function(event){
    if (event.key === 'Escape' || event.key === 'Esc' || event.keyCode === 27) {
      closeLightbox();
      cerrarFlyer();
    }
  });

  (function() {
    const flyerOverlay = document.getElementById('flyer-overlay');
    const fc = document.getElementById('flyer-close');

    if (fc) {
      fc.addEventListener('click', cerrarFlyer);
    }
    if (flyerOverlay) {
      flyerOverlay.addEventListener('click', function(e) {
        if (e.target === flyerOverlay) cerrarFlyer();
      });
    }
  })();

  // --- Preload im√°genes ---
  function preloadImages(urls = []) {
    const unique = Array.from(new Set(urls));
    return Promise.all(unique.map(url => new Promise(resolve => {
      if (!url) return resolve();
      const img = new Image();
      img.src = url;
      if (img.complete) return resolve();
      img.onload = () => resolve();
      img.onerror = () => resolve();
    })));
  }

  // --- Inicio ---
  document.addEventListener('DOMContentLoaded', function(){
    renderCatalogo(productosRopa, 'catalogo-ropa', true);
    preloadImages(productosRopa.map(p=>p.imagen).concat(['marco.svg','Port.png','skull.gif']));
  });
  
</script>
</body>
</html>
